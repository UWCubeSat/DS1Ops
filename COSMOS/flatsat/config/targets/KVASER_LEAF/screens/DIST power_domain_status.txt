SCREEN AUTO AUTO 1.0

  TITLE "Power Domain Status [CAN]"

  VERTICALBOX
    LABELVALUE KVASER_LEAF RC_EPS_DIST_H1 RECEIVED_TIMEFORMATTED WITH_UNITS 25  # COSMOS Received Time (Local time zone, Formatted string)
    LABELVALUE KVASER_LEAF RC_EPS_DIST_H1 RECEIVED_COUNT # COSMOS packet received count
    
    HORIZONTALLINE   
      HORIZONTAL 
        #SPACER 30 10
		LABEL "Batt V: "
        FORMATVALUE KVASER_LEAF RC_EPS_DIST_3 RC_EPS_DIST_3_BATT_V_AVG "%0.3f V"
		LIMITSBAR KVASER_LEAF RC_EPS_DIST_3 RC_EPS_DIST_3_BATT_V_AVG
        LABEL "Undervoltage State: "
		VALUE KVASER_LEAF RC_EPS_DIST_2 RC_EPS_DIST_2_UV_STATE CONVERTED
      END
    HORIZONTALLINE  
  
    MATRIXBYCOLUMNS 5 2 2
		LABEL "COM1->"
		LABEL "Current:"
		HORIZONTAL
			FORMATVALUE KVASER_LEAF RC_EPS_DIST_1 RC_EPS_DIST_1_COM1_C_AVG "%0.3f A" FORMATTED 10
			LIMITSBAR KVASER_LEAF RC_EPS_DIST_1 RC_EPS_DIST_1_COM1_C_AVG
		END
		LABEL "Bus V:"
		HORIZONTAL
			FORMATVALUE KVASER_LEAF RC_EPS_DIST_5 RC_EPS_DIST_5_COM1_V_AVG "%0.3f V" FORMATTED 10
			LIMITSBAR KVASER_LEAF RC_EPS_DIST_5 RC_EPS_DIST_5_COM1_V_AVG
		END

		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '6', voltNum: '7', ss: 'COM2'} %>
		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '8', voltNum: '9', ss: 'RAHS'} %>
		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '10', voltNum: '11', ss: 'BDOT'} %>
		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '12', voltNum: '13', ss: 'ESTIM'} %>
		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '14', voltNum: '15', ss: 'EPS'} %>
		<%= render "_scrn_pd_view_can.txt", locals: {currNum: '16', voltNum: '17', ss: 'PPT'} %>
    
    END

    SPACER 150 10
    HORIZONTALLINE
    SPACER 150 10
    
    BUTTON 'Toggle All' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_COM1 3, GCMD_DIST_SET_PD_STATE_COM2 3, GCMD_DIST_SET_PD_STATE_RAHS 3, GCMD_DIST_SET_PD_STATE_BDOT 3, GCMD_DIST_SET_PD_STATE_ESTIM 3, GCMD_DIST_SET_PD_STATE_WHEELS 3, GCMD_DIST_SET_PD_STATE_EPS 3, GCMD_DIST_SET_PD_STATE_PPT 3")'    
    BUTTON 'Enable All' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_COM1 1, GCMD_DIST_SET_PD_STATE_COM2 1, GCMD_DIST_SET_PD_STATE_RAHS 1, GCMD_DIST_SET_PD_STATE_BDOT 1, GCMD_DIST_SET_PD_STATE_ESTIM 1, GCMD_DIST_SET_PD_STATE_WHEELS 1, GCMD_DIST_SET_PD_STATE_EPS 1, GCMD_DIST_SET_PD_STATE_PPT 1")'  
    BUTTON 'Disable All' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_COM1 2, GCMD_DIST_SET_PD_STATE_COM2 2, GCMD_DIST_SET_PD_STATE_RAHS 2, GCMD_DIST_SET_PD_STATE_BDOT 2, GCMD_DIST_SET_PD_STATE_ESTIM 2, GCMD_DIST_SET_PD_STATE_WHEELS 2, GCMD_DIST_SET_PD_STATE_EPS 2, GCMD_DIST_SET_PD_STATE_PPT 2")'    
        
    SPACER 150 10
    HORIZONTALLINE
    SPACER 150 10
        
    MATRIXBYCOLUMNS 7 2 2
      LABEL ""
      LABEL "COM2"
      LABEL "RAHS"
      LABEL "BDOT"
      LABEL "ESTIM"
      LABEL "EPS"
      LABEL "PPT"
      
      LABEL "State"
      VALUE KVASER_LEAF RC_EPS_DIST_6 RC_EPS_DIST_6_COM2_STATE
      VALUE KVASER_LEAF RC_EPS_DIST_8 RC_EPS_DIST_8_RAHS_STATE
      VALUE KVASER_LEAF RC_EPS_DIST_10 RC_EPS_DIST_10_BDOT_STATE
      VALUE KVASER_LEAF RC_EPS_DIST_12 RC_EPS_DIST_12_ESTIM_STATE
      VALUE KVASER_LEAF RC_EPS_DIST_14 RC_EPS_DIST_14_EPS_STATE
      VALUE KVASER_LEAF RC_EPS_DIST_16 RC_EPS_DIST_16_PPT_STATE
	  
	  LABEL "Threshold"
	  VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_COM2_OCP_THRESH
      VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_RAHS_OCP_THRESH
	  VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_BDOT_OCP_THRESH
	  VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_ESTIM_OCP_THRESH
	  VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_EPS_OCP_THRESH
	  VALUE KVASER_LEAF RC_EPS_DIST_18 RC_EPS_DIST_18_PPT_OCP_THRESH
	  
      LABEL "Toggle"
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_COM2 3")'
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_RAHS 3")'
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_BDOT 3")'
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_ESTIM 3")'
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_EPS 3")'
      BUTTON 'Toggle' 'cmd("KVASER_LEAF GCMD_DIST_SET_PD_STATE with GCMD_DIST_SET_PD_STATE_PPT 3")'
         
    END
       
    SPACER 300 10
    
  END
